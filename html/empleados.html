<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Operaci√≥n ‚Äì Empleados</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <!-- Layout global -->
  <link rel="stylesheet" href="../css/styles.css">
  <!-- Estilos espec√≠ficos de Empleados -->
  <link rel="stylesheet" href="../css/empleados.css">
</head>
<body>
  <a class="skip-link" href="#main">Saltar al contenido</a>

  <!-- Topbar -->
  <header class="topbar">
    <button id="menuBtn" class="menu-btn" aria-controls="sidebar" aria-expanded="false" aria-label="Men√∫">‚ò∞</button>
    <div class="logo-sm">RR.HH. Suite</div>
  </header>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar">
    <div class="logo">RR.HH. Suite</div>
    <nav class="nav" aria-label="Navegaci√≥n principal">
      <div class="caption">Reclutamiento</div>
      <a href="formularioweb.html">Formulario</a>
      <!-- <a href="consulta.html">Consulta</a> -->

      <div class="caption">Operaci√≥n</div>
      <a href="empleados.html" class="active" aria-current="page">Empleados</a>
      <a href="contratos.html">Contratos</a>
      <a href="nomina.html">N√≥mina</a>

      <div class="sep"></div>
      <div class="caption">Usuario / Configuraci√≥n</div>
      <a href="config.html">Par√°metros de Empresa</a>
    </nav>
  </aside>
  <div id="backdrop" class="menu-backdrop" tabindex="-1"></div>

  <!-- Contenido principal -->
  <main id="main" class="main" tabindex="-1">
    <div class="page">
      <!-- Header -->
      <header class="page__header">
        <div>
          <h1 class="h1">Empleados</h1>
          <p class="muted">Tarjetas con foto, nombre, documento, cargo y proyecto.</p>
        </div>
        <button class="btn btn-primary" id="btn-nuevo">+ Nuevo empleado</button>
      </header>

      <!-- Toolbar -->
      <section class="toolbar">
        <div class="filters">
          <button class="chip" data-filter="ALL">Todos</button>
          <button class="chip" data-filter="ACTIVO">Activos</button>
          <button class="chip" data-filter="EN_OBSERVACION">En observaci√≥n</button>
          <button class="chip" data-filter="INACTIVO">Inactivos</button>
          <span class="muted hide-mobile" id="txt-total">0 empleados</span>
        </div>

        <div class="search">
          <input id="input-search" type="search" placeholder="Buscar por nombre, DNI, cargo o proyecto..." />
          <span class="search__icon">üîé</span>
        </div>
      </section>

      <!-- Grid -->
      <section id="grid" class="grid" aria-live="polite" aria-busy="false"></section>

      <!-- Cargar m√°s + sentinel -->
      <div class="loadmore">
        <button id="btn-load" class="btn" hidden>Cargar m√°s</button>
        <div id="sentinel" class="sentinel" aria-hidden="true"></div>
      </div>

      <!-- Template tarjeta -->
      <template id="card-tpl">
        <article class="card" aria-expanded="false">
          <button class="card__top card__toggle" aria-label="Expandir tarjeta" title="Expandir">
            <img class="avatar" alt="" loading="lazy" />
            <div class="card__info">
              <div class="card__name">
                <h3 class="name"></h3>
                <span class="pill"></span>
              </div>
              <p class="muted doc"></p>
              <div class="kv">
                <div><span class="k">Cargo:</span> <span class="v cargo"></span></div>
                <div><span class="k">Proyecto:</span> <span class="v proyecto"></span></div>
              </div>
            </div>
            <span class="chev" aria-hidden="true">‚ñæ</span>
          </button>
        
          <div class="card__actions">
            <button class="btn btn-ghost btn-view">Ver ficha</button>
            <div class="status-actions">
              <button class="btn btn-chip" data-status="ACTIVO">Activo</button>
              <button class="btn btn-chip" data-status="EN_OBSERVACION">En observaci√≥n</button>
              <button class="btn btn-chip" data-status="INACTIVO">Inactivo</button>
            </div>
          </div>
        
          <!-- EXPANDIBLE: botones de √°rea -->
          <div class="card__expand" hidden>
            <div class="expand-actions">
              <button class="btn btn-pill btn-datos" data-modal="datos">Datos</button>
              <button class="btn btn-pill" data-modal="contrato">Contrato</button>
              <button class="btn btn-pill" data-modal="docs">Documentos</button>
              <button class="btn btn-pill" data-modal="hist">Historial</button>
            </div>
          </div>
        </article>
      </template>

      <!-- Template skeleton -->
      <template id="skeleton-tpl">
        <article class="card skeleton">
          <div class="card__top">
            <div class="avatar sk"></div>
            <div class="sk sk-lines">
              <div class="sk sk-line"></div>
              <div class="sk sk-line short"></div>
              <div class="sk sk-line"></div>
            </div>
          </div>
          <div class="card__actions">
            <div class="sk sk-pill"></div>
            <div class="sk sk-chips"></div>
          </div>
        </article>
      </template>
    </div>
  </main>

  <!-- Modal de ficha -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" hidden>
    <div class="modal__panel">
      <button class="modal__close" id="modalClose" aria-label="Cerrar">‚úï</button>
      <div class="modal__header">
        <img id="mFoto" class="avatar avatar--lg" alt="" />
        <div>
          <h2 id="modalTitle" class="modal__title"></h2>
          <p id="mDoc" class="muted"></p>
          <div class="pill" id="mPill"></div>
        </div>
      </div>

      <div class="modal__body">
        <div class="kv">
          <div><span class="k">Cargo:</span> <span id="mCargo" class="v"></span></div>
          <div><span class="k">Proyecto:</span> <span id="mProyecto" class="v"></span></div>
        </div>
      </div>

      <div class="modal__footer">
        <div class="status-actions">
          <button class="btn btn-chip" data-status="ACTIVO">Activo</button>
          <button class="btn btn-chip" data-status="EN_OBSERVACION">En observaci√≥n</button>
          <button class="btn btn-chip" data-status="INACTIVO">Inactivo</button>
        </div>
        <a id="mVerPerfil" class="btn btn-primary" href="#" target="_blank" rel="noopener">Ver perfil completo</a>
      </div>
    </div>
  </div>
  <!-- Plantillas de contenido para modales espec√≠ficos -->
<template id="tpl-modal-datos">
  <div class="form-grid">
    <div class="field"><label>Apellidos</label><input id="md_apellidos" type="text"></div>
    <div class="field"><label>Nombres</label><input id="md_nombres" type="text"></div>
    <div class="field"><label>DNI</label><input id="md_dni" type="text" inputmode="numeric"></div>
    <div class="field"><label>Proyecto</label><input id="md_proyecto" type="text"></div>
    <div class="field"><label>Cargo</label><input id="md_cargo" type="text"></div>
  </div>
</template>

<template id="tpl-modal-contrato">
  <div class="form-grid">
    <div class="field"><label>Tipo de contrato</label><input id="mc_tipo" type="text"></div>
    <div class="field"><label>Fecha de inicio</label><input id="mc_inicio" type="date"></div>
    <div class="field"><label>Fecha de fin</label><input id="mc_fin" type="date"></div>
    <div class="field"><label>Sueldo base</label><input id="mc_sueldo" type="number" min="0" step="0.01"></div>
  </div>
</template>

<template id="tpl-modal-docs">
  <div class="form-grid">
    <div class="field"><label>DNI (PDF/IMG)</label><input id="mdoc_dni" type="file" multiple></div>
    <div class="field"><label>Certificados</label><input id="mdoc_cert" type="file" multiple></div>
    <div class="field"><label>Antecedentes</label><input id="mdoc_ant" type="file" multiple></div>
  </div>
  <p class="small muted">Al guardar se actualizan los documentos del empleado.</p>
</template>

<template id="tpl-modal-hist">
  <table class="doclist">
    <thead><tr><th>Fecha</th><th>Acci√≥n</th><th>Usuario</th><th>Motivo</th></tr></thead>
    <tbody id="mh_tbody">
      <!-- se llena por JS -->
    </tbody>
  </table>
</template>


  <script type="module" src="../js/empleados.js"></script>
</body>
</html>
