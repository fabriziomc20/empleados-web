<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Acceso RR.HH.</title>
  <script src="https://unpkg.com/@supabase/supabase-js"></script>
  <style>
    body { display:flex; height:100vh; align-items:center; justify-content:center; background:#f3f4f6; font-family:sans-serif; }
    .box { background:white; padding:20px; border-radius:10px; width:300px; box-shadow:0 2px 8px rgba(0,0,0,0.1); text-align:center; }
    input { width:100%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:6px; }
    button { width:100%; padding:10px; margin:6px 0; background:#2563eb; color:white; border:none; border-radius:6px; cursor:pointer; }
    button:hover { background:#1e4fd7; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Acceso RR.HH.</h2>
    <input type="email" id="email" placeholder="Correo">
    <input type="password" id="password" placeholder="Contraseña">
    <button onclick="registrar()">Registrar</button>
    <button onclick="login()">Iniciar Sesión</button>
    <button onclick="logout()">Cerrar Sesión</button>
    <p id="mensaje" style="color:red;"></p>
  </div>

  <script>
    // Configuración de Supabase
    const SUPABASE_URL = "https://nwpwvgzhhocdojoburvw.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im53cHd2Z3poaG9jZG9qb2J1cnZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NzEwNTUsImV4cCI6MjA3MzU0NzA1NX0.FK1zKJhT0JIL3oVBcmph08OorcQOCkZt70n6DtuC8Sk";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const mensaje = document.getElementById("mensaje");

    // Si ya hay sesión activa, redirigir al formulario
    async function checkSession() {
      const { data: { session } } = await supabase.auth.getSession();
      if (session) {
        window.location.href = "formulario.html"; 
      }
    }
    checkSession();

    // Registrar usuario
    async function registrar() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const { error } = await supabase.auth.signUp({ email, password });
      if (error) mensaje.textContent = error.message;
      else mensaje.textContent = "Revisa tu correo para confirmar el registro.";
    }

    // Iniciar sesión
    async function login() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const { error } = await supabase.auth.signInWithPassword({ email, password });
      if (error) mensaje.textContent = error.message;
      else window.location.href = "formulario.html"; 
    }

    // Cerrar sesión
    async function logout() {
      await supabase.auth.signOut();
      mensaje.textContent = "Sesión cerrada.";
    }
  </script>
</body>
</html>


